{% extends "blog/base.html" %}

{% block page_content %}
    {% if page_obj %}
        {% regroup page_obj by month as post_months %}
        <!-- Regroup produces a list of group objects. 
         Each group object has two attributes: grouper and list. -->

        {% for monthly in post_months %}
            <h3><a href="{% url "archive_month" monthly.grouper|date:"Y" monthly.grouper|date:"m" %}">
                {{ monthly.grouper | date:"F" }}
            </a></h3>
            <ul class="archive_index">
                {% for post in monthly.list %}
                    <li><span class="archive_index_date">{{ post.created_on.date | date:"M j, Y" }}</span> - <a href="{% url 'blog_detail' post.pk %}">{{ post.title }}</a></li>
                {% endfor %}
            </ul>
        {% endfor %}

    {% else %}
        <p>No posts found.</p>

    {% endif %}
{% endblock page_content %}

