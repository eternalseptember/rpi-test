{% extends "blog/base.html" %}


{% block page_title %}
    <h2 class="blog_detail_title">{{ page_title }}</h2>
{% endblock page_title %}


{% block page_content %}
    <div class="blog_post">
        <!-- Post Metadata -->
        <div class="post_meta_info">
            <small>
                {{ post.created_on.date | date:"M j, Y" }} {% comment %}| Categories:
                {% for category in post.categories.all %}
                    <a href="{% url "blog_category" category.name %}">{{ category.name }}</a>{% if not forloop.last %}, {% endif %}
                {% endfor %}
                {% endcomment %}
            </small>
        </div>

        <!-- Post Body -->
        <div class="post_body">
            <p>{{ post.formatted_markdown }}</p>
        </div>
        
    </div>

    <!-- Section Explaining the Categories -->
    <div class="post_categories">
        <h3>Categories</h3>
        <ul class="categories_list">
            {% for connection in post.connection_set.select_related %}
                <li>
                    <a href="{% url "blog_category" connection.category.name %}">{{ connection.category.name }}</a> {% if connection.comment %}- {{ connection.comment }}{% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock page_content %}


{% block page_navigation %}
    {% if post.get_previous_by_created_on %}
        <a href="{% url "blog_detail" post.get_previous_by_created_on.pk %}">prev</a>
    {% endif %}

    <span class="current_page">~</span>

    {% if post.get_next_by_created_on.pk %}
        <a href="{% url "blog_detail" post.get_next_by_created_on.pk %}">next</a>
    {% endif %}
{% endblock page_navigation %}

